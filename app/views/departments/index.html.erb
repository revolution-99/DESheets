<div class="container">
  <h2 class="text-center mb-4">Department Management</h2>

  <div class="col text-right mb-2">
    <div class="card">
      <div class="card-body d-flex justify-content-between align-items-center">
        <div>
          <h5 class="card-title mb-0">DESheets/Departments</h5>
        </div>
        <div>
          <%= link_to "Create department", new_department_path(@department), class: "btn btn-outline-primary" %>
        </div>
      </div>
    </div>
  </div>

  <table class="table table-default table-striped">
    <thead class="thead-dark">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Location</th>
        <th>Employees</th>
        <th class="d-flex justify-content-center">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @departments.each do |department| %>
        <tr>
          <td><%= link_to department.id , department_path(department.id ), class: "text-decoration-none" %></td>
          <td><%= department.name %></td>
          <td><%= department.location %></td>
          <td>
            <% department.employees.each do |emp| %>
              <%= emp&.name %>
              <br>
            <% end %>
          </td>
          <td class="d-flex justify-content-center">
            <%= link_to edit_department_path(department.id), class: "btn mr-2" do %>
              <i class="fas fa-edit"></i> Edit
            <% end %>
            <%= button_to department_path(department.id), method: :delete, data: { confirm: "Are you sure?" }, class: "btn" do %>
              <i class="fas fa-trash-alt"></i> Delete
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
